1. Create Key

openssl genrsa -out jane.key 2048

openssl req -new -key jane.key -out jane.csr

Common Name (e.g. server FQDN or YOUR name) []:jane

2)Create CSR

yml

3)API

k certificate approve jane

4)Download CRT from api

k get csr jane -o yaml

<!-- Copy the certidficate -->

echo LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURPVENDQWlHZ0F3SUJBZ0lRQ25MQTQrdnhzZkRBS3hXZ2lnNDRBekFOQmdrcWhraUc5dzBCQVFzRkFEQVYKTVJNd0VRWURWUVFERXdwcmRXSmxjbTVsZEdWek1CNFhEVEkwTURVd01qSXpNemMxTlZvWERUSTBNRFV3TXpJegpNemMxTlZvd1ZERUxNQWtHQTFVRUJoTUNRVlV4RXpBUkJnTlZCQWdUQ2xOdmJXVXRVM1JoZEdVeElUQWZCZ05WCkJBb1RHRWx1ZEdWeWJtVjBJRmRwWkdkcGRITWdVSFI1SUV4MFpERU5NQXNHQTFVRUF4TUVhbUZ1WlRDQ0FTSXcKRFFZSktvWklodmNOQVFFQkJRQURnZ0VQQURDQ0FRb0NnZ0VCQU1FNitMNHRTRWRIMy9kZ01nYU5sRWlWLzJLMgowRXpPUElFK1VRaEVyOEdWc2lHTHFNZWhsNElkaTdBdkpzU1VoaUxVWnlXdklOTitURU1ndUtuVG9xRzhWMU4wCkEwcCt1YUhKY242V3J3cWJYVTN4bHZPUys3NHdpUy9RaWF1STIzTXVjU0tjRGkwOExqejdFSVZITGxDMHNnMXQKYTJjVlZrUXpSQmRiYWt0QUV2Z09SZjhlVjc1SjhzUEh3YTdzZmtLSkpRY2hLcjArYzByQ1JlS2svaVBkTU1EVwovc21YSHhFUUZpU2tRd1JTSU1ONmROVmlHcVkrMVpoMVovRlVVcWtLSlZpZnBaWmtFQndvUVRvK2Vjb1J5cjhBCndHbG1uZFlRdGlmRm1QMW95d3hCYnB2MDN6V2JiOWwyWmRQMWtaUTJvMTVwalBiWUt4SGhnN1VjZ09NQ0F3RUEKQWFOR01FUXdFd1lEVlIwbEJBd3dDZ1lJS3dZQkJRVUhBd0l3REFZRFZSMFRBUUgvQkFJd0FEQWZCZ05WSFNNRQpHREFXZ0JUZ2tDUTRiNGFRSkEyTmg5UFhMbUZFZjlDTE56QU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FRRUFkMlk4ClZEdHE0NFJna2t4QTBpNzNpNHN1aXF0QlpINU1QZzFLcmdOUU96RS9PNlp6cmczU3lOSE5ubTNHYzRDbUxLTXUKcXZsQ1FGalpLOHZaY2JINTNEWllyRlZ6WFZNby9mUmdPcm81RXdKaldYQTlsa1ZLU09ZUmZ1VW41eHF4aWM0UwpUOGxabTZxVWVPbVFlQ29zak9YblJwaS9IelNHK00xL0Q5U3UrbFoyR1Z0OHNjWlBGMGl0THdKWFIwdVZ1b2xLCjJRQ0I1aFVDK3pyS2IrQXF4ZHdnMFBYZlRiNysvcHJwR2twTEVER21nY1dSSEJLVEs4RG1aQTZpK3JyUFJDNnMKQXJtNllaM3dqNjNjZDZjby9oWGFlaFdQdUxPQVMzNnNoSjBnQnF3dmFlMXdvZ2VlMCszUjV1dkFHbGFtTlVMQgprQmFJbDNobDdaNWN6bkRLWnc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg== | base64 -d > jane.crt

5)Use crt +key

k config set-credentials jane --client-key=jane.key --client-certificate=jane.crt

k config set-credentials jane --client-key=jane.key --client-certificate=jane.crt --embed-certs

k config set-context jane --user=jane --cluster=kubernetes
